"use strict";!function(t,i){if("function"==typeof define)define(i);else if("undefined"!=typeof module&&module.exports)module.exports=i();else{var n=i(),e=window,s=e[t];n.noConflict=function(){return e[t]=s,n},e[t]=n}}("Sydney",function(){var t=function(i,n){return this instanceof t?void(n?(this.endpoint=i,this.callback=n):i&&(i instanceof Function?this.callback=i:this.endpoint=i)):new t(i,n)};return t.testIfNextTickSupported=function(){try{global.process.nextTick instanceof Function?t.nextTickSupported=!0:t.nextTickSupported=!1}catch(i){t.nextTickSupported=!1}},t.find=function(t,i){for(var n=0,e=(i.subscribers=i.subscribers||[]).length;e>n;n++)if(i.subscribers[n].callback===t||i.subscribers[n].endpoint===t||i.subscribers[n].callback===t.callback||i.subscribers[n].endpoint===t.endpoint||i.subscribers[n]===t)return i.subscribers[n]},t.amplify=function(i){void 0===i.add&&(i.add=t.prototype.add),void 0===i.broadcast&&(i.broadcast=t.prototype.broadcast),void 0===i.link&&(i.link=t.prototype.link),void 0===i.remove&&(i.remove=t.prototype.remove),void 0===i.send&&(i.send=t.prototype.send),void 0===i.unlink&&(i.unlink=t.prototype.unlink)},t.prototype.send=function(i){var n;return n=this.callback?function(){this.callback(i,this)}.bind(this):function(){this.broadcast(i)}.bind(this),this.endpoint&&!this.endpoint.match(i)?this:(void 0===t.nextTickSupported&&t.testIfNextTickSupported(),t.nextTickSupported?process.nextTick(n):setTimeout(n,0),this)},t.prototype.broadcast=function(t){return(this.subscribers=this.subscribers||[]).forEach(function(i){i.send(t)}),this},t.prototype.add=function(i){return this.subscribers=this.subscribers||[],i instanceof t||t.amplify(i),this.subscribers.push(i),this},t.prototype.remove=function(i){var n,e;return(n=t.find(i,this))?(e=this.subscribers.indexOf(t.find(i,this)),-1===e?this:(this.subscribers.splice(e,1),this)):this},t.prototype.link=function(i){return i instanceof t||t.amplify(i),this.add(i),i.add(this),this},t.prototype.unlink=function(i){return i=t.find(i,this),i&&(i.remove(this),this.remove(i)),this},t});
