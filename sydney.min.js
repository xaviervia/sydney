"use strict";!function(t,i){if("function"==typeof define)define(i);else if("undefined"!=typeof module&&module.exports)module.exports=i();else{var n=i(),e=window,s=e[t];n.noConflict=function(){return e[t]=s,n},e[t]=n}}("Sydney",function(){var t=function(i,n){return this instanceof t?void(n?(this.endpoint=i,this.callback=n):i&&(i.callback&&i.endpoint&&(this.callback=i.callback.bind(i),this.endpoint=i.endpoint),i.callback?this.callback=i.callback.bind(i):i.endpoint?this.endpoint=i.endpoint:i.match?this.endpoint=i:this.callback=i)):new t(i,n)};return t.testIfNextTickSupported=function(){try{global.process.nextTick instanceof Function?t.nextTickSupported=!0:t.nextTickSupported=!1}catch(i){t.nextTickSupported=!1}},t.find=function(t,i){for(var n=0,e=(i.subscribers=i.subscribers||[]).length;e>n;n++)if(i.subscribers[n].callback===t||i.subscribers[n].endpoint===t||i.subscribers[n].callback===t.callback||i.subscribers[n].endpoint===t.endpoint||i.subscribers[n]===t)return i.subscribers[n]},t.make=function(i,n){return n?new t(i,n):i instanceof Function?new t(i):i instanceof t?i:i.callback&&i.endpoint?new t(i.endpoint,i.callback.bind(i)):i.callback?new t(i.callback.bind(i)):i.endpoint?new t(i.endpoint):i},t.prototype.send=function(i){var n;return n=this.callback?function(){this.callback(i,this)}.bind(this):function(){this.broadcast(i)}.bind(this),this.endpoint&&!this.endpoint.match(i)?this:(void 0===t.nextTickSupported&&t.testIfNextTickSupported(),t.nextTickSupported?process.nextTick(n):setTimeout(n,0),this)},t.prototype.broadcast=function(t){return(this.subscribers=this.subscribers||[]).forEach(function(i){i.send(t)}),this},t.prototype.add=function(i,n){return this.subscribers=this.subscribers||[],this.subscribers.push(t.make(i,n)),this},t.prototype.remove=function(i){var n,e;return(n=t.find(i,this))?(e=this.subscribers.indexOf(t.find(i,this)),-1===e?this:(this.subscribers.splice(e,1),this)):this},t.prototype.link=function(i,n){var e=t.make(i,n);return this.add(e),e.add(this),this},t.prototype.unlink=function(i){return i=t.find(i,this),i&&(i.remove(this),this.remove(i)),this},t});
