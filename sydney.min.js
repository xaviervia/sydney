"use strict";!function(i,t){if("function"==typeof define)define(t);else if("undefined"!=typeof module&&module.exports)module.exports=t();else{var n=t(),s=window,e=s[i];n.noConflict=function(){return s[i]=e,n},s[i]=n}}("Sydney",function(){var i=function(t,n){return this instanceof i?void(n?(this.endpoint=t,this.callback=n):t&&(t.callback&&t.endpoint&&(this.callback=t.callback.bind(t),this.endpoint=t.endpoint),t.callback?this.callback=t.callback.bind(t):t.endpoint?this.endpoint=t.endpoint:t.match?this.endpoint=t:this.callback=t)):new i(t,n)};return i.find=function(i,t){for(var n=0,s=(t.subscribers=t.subscribers||[]).length;s>n;n++)if(t.subscribers[n].callback===i||t.subscribers[n].endpoint===i||t.subscribers[n].callback===i.callback||t.subscribers[n].endpoint===i.endpoint||t.subscribers[n]===i)return t.subscribers[n]},i.make=function(t,n){return n?new i(t,n):t instanceof Function?new i(t):t instanceof i?t:t.callback&&t.endpoint?new i(t.endpoint,t.callback.bind(t)):t.callback?new i(t.callback.bind(t)):t.endpoint?new i(t.endpoint):t},i.prototype.send=function(i){var t;return t=this.callback?function(){this.callback(i,this)}.bind(this):function(){this.broadcast(i)}.bind(this),this.endpoint&&!this.endpoint.match(i)?this:(process&&process.nextTick?process.nextTick(t):setImmediate?setImmediate(t):setTimeout(t,0),this)},i.prototype.broadcast=function(i){return(this.subscribers=this.subscribers||[]).forEach(function(t){t.send(i)}),this},i.prototype.add=function(t,n){return this.subscribers=this.subscribers||[],this.subscribers.push(i.make(t,n)),this},i.prototype.remove=function(t){var n,s;return(n=i.find(t,this))?(s=this.subscribers.indexOf(i.find(t,this)),-1===s?this:(this.subscribers.splice(s,1),this)):this},i.prototype.link=function(t,n){var s=i.make(t,n);return this.add(s),s.add(this),this},i.prototype.unlink=function(t){return t=i.find(t,this),t&&(t.remove(this),this.remove(t)),this},i});
